# Архитектура проекта TensorTrade

## Обзор проекта
TensorTrade - это комплексная система алгоритмической торговли, использующая комбинацию нейронных сетей и традиционных алгоритмов для достижения высокой рентабельности (300-400% годовых) на спотовом рынке криптовалют, начиная с пары ETH/USDT на Binance.

## Архитектура системы

### 1. Компоненты сбора и обработки данных
- **Модуль сбора данных Binance** - получение исторических и реал-тайм данных через API Binance
- **Препроцессор данных** - нормализация, очистка и подготовка данных для обучения моделей
- **Генератор признаков** - создание технических индикаторов и дополнительных признаков

### 2. Компоненты торговой стратегии
- **Многоуровневая комбинированная модель**:
  - **LSTM сеть** - для анализа временных рядов и прогнозирования следующих движений цены
  - **Reinforcement Learning модуль** - обучение агента принимать оптимальные торговые решения
  - **Модуль технических индикаторов** - традиционный анализ (MACD, RSI, Bollinger Bands и т.д.)
  - **Модуль Supervised Learning** - классификация рыночных состояний на основе исторических данных
  - **Ансамблевый интегратор** - объединение сигналов от разных моделей для принятия итогового решения

### 3. Система обучения и оптимизации
- **Обучающий модуль** - тренировка всех компонентов на исторических данных
- **Система гиперпараметрической оптимизации** - поиск оптимальных параметров (Bayesian Optimization)
- **Валидационный модуль** - проверка на несмещённых данных для контроля переобучения

### 4. Система тестирования и симуляции
- **Бэктестер** - тестирование стратегии на исторических данных
- **WSS сервер симуляции** - эмуляция потока данных с биржи для тестирования в реалистичных условиях
- **Модуль Live Trading** - компонент для выполнения торговых операций с тремя режимами:
  - Режим симуляции (использует данные WSS сервера)
  - Режим демо-трейдинга (использует демо-счёт биржи)
  - Боевой режим (реальная торговля)

### 5. Система визуализации и анализа
- **Визуализация торговли** - отображение точек входа/выхода на графике
- **Аналитическая панель** - метрики эффективности, распределение сделок, профит-фактор и т.д.
- **Отчёты по оптимизации** - визуализация процесса и результатов оптимизации моделей

### 6. Инфраструктура
- **Система логирования** - запись всех событий и решений для последующего анализа
- **Модуль управления рисками** - контроль размера позиций и общего риска
- **Система уведомлений** - оповещения о важных событиях и состояниях системы

## Технический стек
- **Язык программирования**: Python
- **Библиотеки для ML/DL**: TensorFlow, Keras, PyTorch, Stable Baselines (RL)
- **Обработка данных**: Pandas, NumPy, TA-Lib (технический анализ)
- **Торговый API**: ccxt (для взаимодействия с Binance)
- **Визуализация**: Matplotlib, Plotly, Dash
- **Веб-сервер симуляции**: FastAPI с WebSockets
- **Оптимизация**: Optuna, Hyperopt
- **Тестирование**: pytest, backtrader

## Рабочий процесс системы

1. **Сбор и обработка данных**
   - Загрузка исторических данных для обучения
   - Обработка потоковых данных через WebSocket для live trading
   - Генерация признаков на основе сырых данных

2. **Обучение и оптимизация**
   - Обучение компонентов моделей (LSTM, RL, Supervised)
   - Оптимизация параметров моделей и торговой стратегии
   - Валидация на отложенных данных

3. **Бэктестинг**
   - Тестирование на исторических данных
   - Анализ метрик эффективности
   - Итеративная доработка стратегии

4. **Симуляция и live trading**
   - Запуск WSS-сервера симуляции
   - Тестирование в условиях, приближенных к реальным
   - Переход к демо-режиму и затем к боевому режиму

5. **Мониторинг и анализ**
   - Непрерывный мониторинг состояния системы
   - Анализ эффективности и выявление проблем
   - Периодическая переоптимизация моделей

## Критерии успеха
- Стабильная рентабельность не менее 300% годовых на бэктестах и в симуляции
- Положительные результаты в демо-режиме не менее 1 месяца
- Устойчивость стратегии к различным рыночным условиям
- Низкие просадки (менее 15% от максимальной стоимости портфеля)